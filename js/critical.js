!function(){"use strict";const e={toggle:(e,t,i=void 0)=>!!e&&e.classList.toggle(t,i),add(e,...t){e&&e.classList.add(...t)},remove(e,...t){e&&e.classList.remove(...t)},toggleAll(e,t,i=void 0){return e.map(e=>this.toggle(e,t,i))},addAll(e,...t){e.forEach(e=>this.add(e,...t))},removeAll(e,...t){e.forEach(e=>this.remove(e,...t))},replace(e,t,i){e&&(this.remove(e,t),this.add(e,i))}},t={isTouchDevice:()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,getInteractionEvent(){return this.isTouchDevice()?"click":"hover"},initTouchSupport(){this.isTouchDevice()?e.add(document.body,"touch-device"):e.add(document.body,"no-touch-device")}},i={getFocusableElements:e=>e?Array.from(e.querySelectorAll('a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])')):[],setAriaExpanded(e,t){e&&e.setAttribute("aria-expanded",t.toString())}},{getFocusableElements:n,setAriaExpanded:a}=i,handleMegaMenuKeyboard=(e,t,i)=>{if("Escape"===e.key)return e.preventDefault(),t.setAttribute("aria-hidden","true"),a(i,!1),void i.focus();if("Tab"===e.key){const r=n(t),o=r.indexOf(document.activeElement),s=0===o,d=o===r.length-1;if(e.shiftKey&&s||!e.shiftKey&&d){e.preventDefault(),t.setAttribute("aria-hidden","true"),a(i,!1);const n=Array.from(document.querySelectorAll("[data-js-nav='menu'] > li > a")),r=n.indexOf(i);(e.shiftKey?r>0?n[r-1]:i:r<n.length-1?n[r+1]:i).focus()}}},handleMenuItemKeyboard=(e,t,i,r)=>{if("Enter"===e.key||" "===e.key||"ArrowDown"===e.key){e.preventDefault();if("false"===i.getAttribute("aria-hidden")){if("ArrowDown"===e.key){const e=n(i)[0];return void(e&&e.focus())}i.setAttribute("aria-hidden","true"),a(t,!1)}else{r(),i.setAttribute("aria-hidden","false"),a(t,!0);const e=i.querySelector(".mega-menu-intro > h2");e&&(e.setAttribute("tabindex","-1"),setTimeout(()=>e.focus(),200))}}else"Escape"===e.key&&(r(),t.focus())};(()=>{try{function initNavigation(){const e=document.querySelector("[data-js-nav='main']");if(!e||e.hasAttribute("data-critical-nav-initialized"))return!1;const t=document.querySelector("[data-js-nav='toggle']"),i=document.querySelector("[data-js-nav='menu']"),r=document.querySelector("[data-js-nav='utility']");if(!t||!i)return!i&&t&&(t.style.display="none"),!1;const o=document.body.classList.contains("touch-device")?"click":"hover";let s=!1;window.addEventListener("mousemove",()=>{s=!0},{once:!0});let d=null;const closeMegaMenus=()=>{d&&(clearTimeout(d),d=null),document.querySelectorAll(".mega-menu[aria-hidden='false']").forEach(e=>{e.setAttribute("aria-hidden","true");const t=e.getAttribute("id"),i=document.querySelector(`[aria-controls="${t}"]`);i&&a(i,!1)})},closeUtilityMenus=()=>{document.querySelectorAll("[data-js-nav='utility'] a[aria-expanded='true']").forEach(e=>{a(e,!1);const t=e.getAttribute("aria-controls"),i=document.getElementById(t);i&&i.setAttribute("aria-hidden","true")})},closeAll=()=>{d&&(clearTimeout(d),d=null),closeMegaMenus(),closeUtilityMenus()};t.addEventListener("click",()=>{const i=e.classList.toggle("toggled");a(t,i),document.body.classList.toggle("no-scroll",i)}),e.addEventListener("keydown",i=>{if("Tab"===i.key&&!i.shiftKey&&e.classList.contains("toggled")){const r=n(e),o=r[r.length-1];document.activeElement===o&&(i.preventDefault(),e.classList.remove("toggled"),a(t,!1),document.body.classList.remove("no-scroll"),setTimeout(()=>t.focus(),0))}});return i.querySelectorAll("[aria-controls]").forEach(e=>{const t=e.getAttribute("aria-controls"),i=document.getElementById(t);if(!i||e.hasAttribute("data-mega-nav-initialized"))return;e.setAttribute("data-mega-nav-initialized","true"),i.setAttribute("aria-hidden","true");const n=e.parentNode;if("hover"===o){const showMenu=()=>{s&&(d&&(clearTimeout(d),d=null),closeMegaMenus(),closeUtilityMenus(),i.setAttribute("aria-hidden","false"),a(e,!0))},hideMenu=()=>{d=setTimeout(()=>{i.setAttribute("aria-hidden","true"),a(e,!1),d=null},200)},clearTimer=()=>{d&&(clearTimeout(d),d=null)};n.addEventListener("mouseenter",showMenu),n.addEventListener("mouseleave",hideMenu),i.addEventListener("mouseenter",clearTimer),i.addEventListener("mouseleave",hideMenu)}else e.addEventListener("click",t=>{if(null!==i.offsetParent){t.preventDefault();"false"===i.getAttribute("aria-hidden")?(i.setAttribute("aria-hidden","true"),a(e,!1)):(closeAll(),i.setAttribute("aria-hidden","false"),a(e,!0))}});e.addEventListener("keydown",t=>{handleMenuItemKeyboard(t,e,i,closeAll)}),i.addEventListener("keydown",t=>{handleMegaMenuKeyboard(t,i,e)})}),e.querySelectorAll(".dropdown-toggle").forEach((e,t)=>{const i=e.parentNode.querySelector(":scope > ul");if(i){const n=`mobile-submenu-${t}`;i.setAttribute("id",n),e.setAttribute("aria-controls",n),e.setAttribute("aria-expanded","false"),e.addEventListener("click",t=>{t.stopPropagation(),t.preventDefault();const i="true"===e.getAttribute("aria-expanded");a(e,!i)})}}),(()=>{if(!r)return;r.querySelectorAll(":scope > ul > li").forEach((e,t)=>{const i=e.querySelector(":scope > a"),n=e.querySelector(":scope > ul");if(i&&n){const r=`utility-submenu-${t}`;if(n.setAttribute("id",r),n.setAttribute("aria-hidden","true"),i.setAttribute("aria-controls",r),i.setAttribute("aria-expanded","false"),"hover"===o){const showSubmenu=()=>{closeUtilityMenus(),a(i,!0),n.setAttribute("aria-hidden","false")},hideSubmenu=()=>{a(i,!1),n.setAttribute("aria-hidden","true")};e.addEventListener("mouseenter",showSubmenu),e.addEventListener("mouseleave",hideSubmenu)}else i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();"true"===i.getAttribute("aria-expanded")?(a(i,!1),n.setAttribute("aria-hidden","true")):(closeUtilityMenus(),a(i,!0),n.setAttribute("aria-hidden","false"))});i.addEventListener("keydown",e=>{handleMenuItemKeyboard(e,i,n,closeUtilityMenus)}),n.addEventListener("keydown",e=>{handleMegaMenuKeyboard(e,n,i)})}})})(),"hover"===o&&(e.addEventListener("mouseleave",()=>{closeAll()}),window.addEventListener("blur",closeAll)),document.querySelectorAll(".menu-label").forEach(e=>{const t=e.nextElementSibling;t&&t.classList.contains("dropdown-toggle")&&e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.click()})}),document.addEventListener("click",i=>{const n=e.contains(i.target),o=r&&r.contains(i.target);n||o||(closeAll(),e.classList.remove("toggled"),a(t,!1),document.body.classList.remove("no-scroll"))}),e.setAttribute("data-critical-nav-initialized","true"),!0}document.body&&t.initTouchSupport(),console.log("[Navigation v1.0.0] Script loaded");document.querySelector("[data-js-nav='main']")?initNavigation():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initNavigation):initNavigation()}catch(e){console.error("[Navigation] Error:",e)}})()}();
