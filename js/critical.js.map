{"version":3,"file":"critical.js","sources":["../src/critical/navigation.js"],"sourcesContent":["/**\n * Navigation.js - Handles navigation menu functionality with accessibility support\n * Fixed version addressing mega menu display issues in Chrome v140 and Edge\n * @version 0.01\n */\n\n(() => {\n    // Global error handler to catch any script errors\n    try {\n        console.log('[Navigation v0.01] Script loaded - starting initialization');\n        console.log('[Navigation] Browser:', navigator.userAgent);\n\n    function initNavigation() {\n        console.log('[Navigation] initNavigation() called');\n\n        // Enhanced touch device detection with override check\n        // Some browsers (Chrome v140+) incorrectly report maxTouchPoints on desktop\n        const hasTouch = \"ontouchstart\" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\n        const hasPointerFine = window.matchMedia && window.matchMedia(\"(pointer: fine)\").matches;\n        const isLikelyDesktop = hasPointerFine && screen.width >= 1024;\n        \n        // Prefer hover mode on desktop even if touch is detected\n        const isTouchDevice = hasTouch && !isLikelyDesktop;\n\n        console.log('[Navigation] Device detection:', {\n            hasTouch,\n            hasPointerFine,\n            isLikelyDesktop,\n            finalDecision: isTouchDevice ? 'touch' : 'desktop',\n            screenWidth: screen.width,\n            maxTouchPoints: navigator.maxTouchPoints\n        });\n        \n        if (isTouchDevice && document.body) {\n            document.body.classList.add(\"touch-device\");\n        }\n\n        const siteNav = document.getElementById(\"site-navigation\");\n\n        if (!siteNav) {\n            console.warn('[Navigation] #site-navigation not found - aborting');\n            return false;\n        }\n\n        // Check if already initialized to prevent duplicate setup\n        if (siteNav.hasAttribute('data-critical-nav-initialized')) {\n            console.log('[Navigation] Already initialized - skipping');\n            return true;\n        }\n\n        console.log('[Navigation] #site-navigation found');\n\n        const button = siteNav.querySelector(\"button\");\n        const menu = siteNav.querySelector(\"ul\");\n        const utilityMenu = document.querySelector(\".utility-menu\");\n\n        // Use \"click\" mode on touch devices, \"hover\" otherwise\n        const megaNavMode = isTouchDevice ? \"click\" : \"hover\";\n        const hoverDelay = 200; // ms\n\n        console.log('[Navigation] Mode:', megaNavMode, '| Button:', !!button, '| Menu:', !!menu);\n\n        // Early returns for missing elements\n        if (!button || !menu) {\n            console.warn('[Navigation] Missing required elements - button or menu not found');\n            if (!menu && button) {\n                button.style.display = \"none\";\n            }\n            return false;\n        }\n\n        menu.classList.add(\"nav-menu\");\n        console.log('[Navigation] Added nav-menu class');\n\n        // Store hide timers in a Map for better tracking\n        const hideTimers = new Map();\n\n        // Helper function: get focusable elements within a container\n        const getFocusable = (container) =>\n            Array.from(\n                container.querySelectorAll(\n                    'a, button, input, textarea, select, [tabindex]:not([tabindex=\"-1\"])'\n                )\n            );\n\n        // Helper functions to close mega menus and utility menus\n        const closeMegaMenus = () => {\n            document\n                .querySelectorAll(\".mega-menu.active\")\n                .forEach((el) => el.classList.remove(\"active\"));\n            \n            // Clear any pending hide timers\n            hideTimers.forEach((timer, key) => {\n                if (key.startsWith('mega-')) {\n                    clearTimeout(timer);\n                    hideTimers.delete(key);\n                }\n            });\n            \n            // Use setTimeout to ensure DOM has updated before checking\n            setTimeout(() => {\n                const container = document.querySelector(\".mega-menu-container\");\n                if (container && !container.querySelector(\".mega-menu.active\")) {\n                    container.classList.remove(\"active\");\n                }\n            }, 10);\n            \n            // Reset aria-expanded on links that control mega menus\n            document.querySelectorAll(\"[aria-controls]\").forEach((link) => {\n                const controlId = link.getAttribute(\"aria-controls\");\n                const controlledEl = controlId && document.getElementById(controlId);\n                if (controlledEl && controlledEl.classList.contains(\"mega-menu\")) {\n                    link.setAttribute(\"aria-expanded\", \"false\");\n                }\n            });\n        };\n\n        const closeUtilityMenus = () => {\n            document\n                .querySelectorAll(\".utility-menu .dropdown-active\")\n                .forEach((el) => el.classList.remove(\"dropdown-active\"));\n        };\n\n        // Global closeAll function\n        const closeAll = () => {\n            // Clear all timers\n            hideTimers.forEach((timer) => clearTimeout(timer));\n            hideTimers.clear();\n            \n            document\n                .querySelectorAll(\".dropdown-active, .mega-menu.active\")\n                .forEach((el) => el.classList.remove(\"dropdown-active\", \"active\"));\n            \n            setTimeout(() => {\n                const container = document.querySelector(\".mega-menu-container\");\n                if (container) {\n                    container.classList.remove(\"active\");\n                }\n            }, 10);\n            \n            document\n                .querySelectorAll(\"[aria-controls]\")\n                .forEach((link) => link.setAttribute(\"aria-expanded\", \"false\"));\n        };\n\n        // Keyboard navigation within mega menus\n        const handleMegaKeyNav = (e) => {\n            const megaMenu = e.currentTarget;\n            if (e.key === \"Escape\") {\n                e.preventDefault();\n                megaMenu.classList.remove(\"active\");\n                \n                setTimeout(() => {\n                    const container = document.querySelector(\".mega-menu-container\");\n                    if (container && !container.querySelector(\".mega-menu.active\")) {\n                        container.classList.remove(\"active\");\n                    }\n                }, 10);\n                \n                if (megaMenu._topLink) {\n                    megaMenu._topLink.focus();\n                }\n                megaMenu.removeEventListener(\"keydown\", handleMegaKeyNav);\n            } else if (e.key === \"Tab\") {\n                const focusable = getFocusable(megaMenu);\n                const currentIndex = focusable.indexOf(document.activeElement);\n                if (\n                    (e.shiftKey && currentIndex === 0) ||\n                    (!e.shiftKey && currentIndex === focusable.length - 1)\n                ) {\n                    e.preventDefault();\n                    megaMenu.classList.remove(\"active\");\n                    const topLinks = Array.from(\n                        document.querySelectorAll(\"#menu-primary > li > a\")\n                    );\n                    const index = topLinks.indexOf(megaMenu._topLink);\n                    const targetLink = e.shiftKey\n                        ? index > 0\n                            ? topLinks[index - 1]\n                            : megaMenu._topLink\n                        : index < topLinks.length - 1\n                            ? topLinks[index + 1]\n                            : megaMenu._topLink;\n                    targetLink.focus();\n                    megaMenu.removeEventListener(\"keydown\", handleMegaKeyNav);\n                }\n            }\n        };\n\n        // Set up dropdown/mega menu handlers\n        const setupDropdowns = (menuElement) => {\n            // Attach click event to .dropdown-toggle buttons to toggle submenus.\n            menuElement.querySelectorAll(\".dropdown-toggle\").forEach((toggle) => {\n                toggle.addEventListener(\"click\", (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    const menuItem = toggle.parentNode;\n                    menuItem.classList.toggle(\"dropdown-active\");\n                });\n            });\n\n            // Process anchor links that have children.\n            menuElement\n                .querySelectorAll(\".menu-item-has-children > a, [aria-controls]\")\n                .forEach((link) => {\n                    const controlId = link.getAttribute(\"aria-controls\");\n                    \n                if (controlId) {\n                    // Mega menu branch\n                    const megaMenu = document.getElementById(controlId);\n                    if (!megaMenu) {\n                        console.error('[Navigation] Mega menu not found:', controlId);\n                        return;\n                    }\n\n                    // Diagnostic logging\n                    console.log('[Navigation] Processing mega menu:', {\n                        controlId,\n                        mode: megaNavMode,\n                        exists: !!megaMenu,\n                        linkHref: link.href,\n                        linkText: link.textContent.trim()\n                    });\n\n                    // Prevent duplicate initialization\n                    if (link.hasAttribute('data-mega-nav-initialized')) {\n                        console.log('[Navigation] Menu link already initialized:', controlId);\n                        return;\n                    }\n                    link.setAttribute('data-mega-nav-initialized', 'true');\n\n                    if (megaNavMode === \"hover\") {\n                        // For hover-enabled devices, attach hover and keyboard events.\n                        console.log('[Navigation] Setting up hover mode for mega menu:', controlId);\n                        \n                        const menuItem = link.parentNode;\n                        const timerId = `mega-${controlId}`;\n                        \n                        const clearTimer = () => {\n                            if (hideTimers.has(timerId)) {\n                                clearTimeout(hideTimers.get(timerId));\n                                hideTimers.delete(timerId);\n                            }\n                        };\n\n                        const showMenu = () => {\n                            console.log('[Navigation] Showing mega menu:', controlId);\n                            clearTimer();\n                            \n                            // Close other mega menus first\n                            document.querySelectorAll(\".mega-menu.active\").forEach((el) => {\n                                if (el !== megaMenu) {\n                                    el.classList.remove(\"active\");\n                                    const otherLink = document.querySelector(`[aria-controls=\"${el.id}\"]`);\n                                    if (otherLink) {\n                                        otherLink.setAttribute(\"aria-expanded\", \"false\");\n                                    }\n                                }\n                            });\n                            \n                            closeUtilityMenus();\n                            \n                            megaMenu.classList.add(\"active\");\n                            const container = document.querySelector(\".mega-menu-container\");\n                            if (container) {\n                                container.classList.add(\"active\");\n                            }\n                            link.setAttribute(\"aria-expanded\", \"true\");\n                            megaMenu._topLink = link;\n                            megaMenu.addEventListener(\"keydown\", handleMegaKeyNav);\n                        };\n\n                        const hideMenu = () => {\n                            const timer = setTimeout(() => {\n                                console.log('[Navigation] Hiding mega menu:', controlId);\n                                megaMenu.classList.remove(\"active\");\n                                \n                                setTimeout(() => {\n                                    const container = document.querySelector(\".mega-menu-container\");\n                                    if (container && !container.querySelector(\".mega-menu.active\")) {\n                                        container.classList.remove(\"active\");\n                                    }\n                                }, 10);\n                                \n                                link.setAttribute(\"aria-expanded\", \"false\");\n                                megaMenu.removeEventListener(\"keydown\", handleMegaKeyNav);\n                                hideTimers.delete(timerId);\n                            }, hoverDelay);\n                            hideTimers.set(timerId, timer);\n                        };\n\n                        menuItem.addEventListener(\"mouseenter\", showMenu);\n                        menuItem.addEventListener(\"mouseleave\", hideMenu);\n                        megaMenu.addEventListener(\"mouseenter\", clearTimer);\n                        megaMenu.addEventListener(\"mouseleave\", hideMenu);\n\n                        // Allow regular clicks to navigate to the link URL\n                        link.addEventListener(\"click\", (e) => {\n                            // Don't prevent default - let the link navigate\n                            // The hover handlers will manage the mega menu display\n                        });\n\n                        // Keyboard navigation for mega menus.\n                        link.addEventListener(\"keydown\", (e) => {\n                            if (e.key === \"Enter\" || e.key === \" \" || e.key === \"ArrowDown\") {\n                                e.preventDefault();\n                                const isActive = megaMenu.classList.contains(\"active\");\n                                if (isActive) {\n                                    if (e.key === \"ArrowDown\") {\n                                        const firstFocusable = getFocusable(megaMenu)[0];\n                                        if (firstFocusable) {\n                                            firstFocusable.focus();\n                                        }\n                                        return;\n                                    }\n                                    megaMenu.classList.remove(\"active\");\n                                    \n                                    setTimeout(() => {\n                                        const container = document.querySelector(\".mega-menu-container\");\n                                        if (container && !container.querySelector(\".mega-menu.active\")) {\n                                            container.classList.remove(\"active\");\n                                        }\n                                    }, 10);\n                                    \n                                    link.setAttribute(\"aria-expanded\", \"false\");\n                                    megaMenu.removeEventListener(\"keydown\", handleMegaKeyNav);\n                                } else {\n                                    closeMegaMenus();\n                                    closeUtilityMenus();\n                                    megaMenu.classList.add(\"active\");\n                                    const container = document.querySelector(\".mega-menu-container\");\n                                    if (container) {\n                                        container.classList.add(\"active\");\n                                    }\n                                    link.setAttribute(\"aria-expanded\", \"true\");\n                                    megaMenu._topLink = link;\n                                    const heading = megaMenu.querySelector(\".mega-menu-intro > h2\");\n                                    if (heading) {\n                                        heading.setAttribute(\"tabindex\", \"-1\");\n                                        setTimeout(() => heading.focus(), 200);\n                                    }\n                                    megaMenu.addEventListener(\"keydown\", handleMegaKeyNav);\n                                }\n                            } else if (e.key === \"Escape\") {\n                                closeAll();\n                                link.focus();\n                            }\n                        });\n                    } else {\n                        // For touch devices in click mode, do not attach a click handler to the link,\n                        // so clicking the link will perform its default navigation.\n                        link.addEventListener(\"keydown\", (e) => {\n                            if (e.key === \"Enter\" || e.key === \" \" || e.key === \"ArrowDown\") {\n                                // Optional keyboard toggling behavior can be added here if desired.\n                            } else if (e.key === \"Escape\") {\n                                closeAll();\n                                link.focus();\n                            }\n                        });\n                    }\n                } else {\n                    // Regular dropdown (typically utility menus).\n                    // For utility menu items: behavior depends on device type\n                    const isUtilityMenu = link.closest('.utility-menu');\n                    const hasDropdownToggle = link.parentNode.querySelector('.dropdown-toggle');\n                    \n                    // On touch devices or when there's no dropdown toggle, prevent navigation and toggle submenu\n                    // On desktop with dropdown toggle, allow natural navigation\n                    if (isUtilityMenu && !hasDropdownToggle) {\n                        // Utility menu items without dropdown toggle (like Knowledge Hub)\n                        // Need different behavior for touch vs non-touch\n                        if (isTouchDevice) {\n                            // On mobile/touch: click should toggle submenu\n                            link.addEventListener(\"click\", (e) => {\n                                const submenu = link.parentNode.querySelector('ul');\n                                if (submenu) {\n                                    e.preventDefault();\n                                    const menuItem = link.parentNode;\n                                    menuItem.classList.toggle(\"dropdown-active\");\n                                }\n                            });\n                        }\n                        // On desktop: clicks navigate naturally (no preventDefault)\n                    }\n                    link.addEventListener(\"keydown\", (e) => {\n                        if (e.key === \"Enter\" || e.key === \" \" || e.key === \"ArrowDown\") {\n                            e.preventDefault();\n                            const menuItem = link.parentNode;\n                            menuItem.classList.toggle(\"dropdown-active\");\n                            if (\n                                e.key === \"ArrowDown\" &&\n                                menuItem.classList.contains(\"dropdown-active\")\n                            ) {\n                                const submenu = menuItem.querySelector(\"ul\");\n                                if (submenu) {\n                                    const firstLink = submenu.querySelector(\"a\");\n                                    if (firstLink) {\n                                        firstLink.focus();\n                                    }\n                                }\n                            }\n                        } else if (e.key === \"Escape\") {\n                            closeAll();\n                            link.focus();\n                        }\n                    });\n                }\n            });\n        };\n\n        // Set up event listeners for main navigation and utility menu\n        button.addEventListener(\"click\", () => {\n            siteNav.classList.toggle(\"toggled\");\n            const isExpanded = button.getAttribute(\"aria-expanded\") === \"true\";\n            button.setAttribute(\"aria-expanded\", (!isExpanded).toString());\n            \n            // Toggle no-scroll class on body for mobile menu scrolling\n            if (siteNav.classList.contains(\"toggled\")) {\n                document.body.classList.add(\"no-scroll\");\n            } else {\n                document.body.classList.remove(\"no-scroll\");\n            }\n        });\n\n        console.log('[Navigation] Setting up dropdowns for main nav');\n        setupDropdowns(siteNav);\n        if (utilityMenu) {\n            console.log('[Navigation] Setting up dropdowns for utility menu');\n            setupDropdowns(utilityMenu);\n        }\n\n        // On mobile/touch devices, make menu-labels clickable to toggle their submenus\n        if (isTouchDevice) {\n            document.querySelectorAll('.menu-label').forEach((label) => {\n                const menuItem = label.parentNode;\n                const dropdownToggle = menuItem.querySelector('.dropdown-toggle');\n                if (dropdownToggle) {\n                    label.style.cursor = 'pointer';\n                    label.addEventListener('click', (e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        // Trigger the dropdown toggle button\n                        dropdownToggle.click();\n                    });\n                }\n            });\n        }\n\n        // Close menus when clicking outside\n        document.addEventListener(\"click\", (e) => {\n            if (\n                !siteNav.contains(e.target) &&\n                !(utilityMenu && utilityMenu.contains(e.target))\n            ) {\n                closeAll();\n                siteNav.classList.remove(\"toggled\");\n                button.setAttribute(\"aria-expanded\", \"false\");\n                document.body.classList.remove(\"no-scroll\");\n            }\n        });\n\n        // Handle keyboard for standard links without aria-controls\n        document.querySelectorAll(\".menu-item-has-children > a\").forEach((link) => {\n            if (!link.getAttribute(\"aria-controls\")) {\n                // Check if this has a dropdown toggle button (mobile menu) - if so, don't interfere\n                const hasDropdownToggle = link.parentNode.querySelector('.dropdown-toggle');\n                if (!hasDropdownToggle) {\n                    link.addEventListener(\"keydown\", (e) => {\n                        const menuItem = link.parentNode;\n                        if (\n                            (e.key === \"Enter\" || e.key === \" \" || e.key === \"ArrowDown\") &&\n                            (menuItem.classList.contains(\"menu-item-has-children\") ||\n                                menuItem.querySelector(\"ul\"))\n                        ) {\n                            e.preventDefault();\n                            menuItem.classList.toggle(\"dropdown-active\");\n                            if (\n                                e.key === \"ArrowDown\" &&\n                                menuItem.classList.contains(\"dropdown-active\")\n                            ) {\n                                const submenu = menuItem.querySelector(\"ul\");\n                                if (submenu) {\n                                    const firstLink = submenu.querySelector(\"a\");\n                                    if (firstLink) {\n                                        firstLink.focus();\n                                    }\n                                }\n                            }\n                        } else if (e.key === \"Escape\") {\n                            closeAll();\n                            link.focus();\n                        }\n                    });\n                }\n            }\n        });\n        \n        // Mark navigation as initialized to prevent duplicate setup\n        siteNav.setAttribute('data-critical-nav-initialized', 'true');\n        console.log('[Navigation] ✓ Initialization complete');\n\n        return true;\n    }\n\n    // Try immediately, then use polling fallback for critical loading\n    if (!initNavigation()) {\n        console.log('[Navigation] Initial attempt failed, starting polling...');\n        let attempts = 0;\n        const maxAttempts = 50; // 5 seconds max\n\n        const pollForNav = setInterval(function() {\n            attempts++;\n            console.log('[Navigation] Poll attempt', attempts, 'of', maxAttempts);\n\n            if (initNavigation() || attempts >= maxAttempts) {\n                clearInterval(pollForNav);\n                if (attempts >= maxAttempts) {\n                    console.error('[Navigation] ✗ Failed to initialize after', maxAttempts, 'attempts');\n                }\n            }\n        }, 100); // Every 100ms\n    }\n\n    } catch (error) {\n        console.error('[Navigation] ✗ FATAL ERROR:', error);\n        console.error('[Navigation] Error details:', error.message, error.stack);\n    }\n})();"],"names":["console","log","navigator","userAgent","initNavigation","hasTouch","window","maxTouchPoints","msMaxTouchPoints","hasPointerFine","matchMedia","matches","isLikelyDesktop","screen","width","isTouchDevice","finalDecision","screenWidth","document","body","classList","add","siteNav","getElementById","warn","hasAttribute","button","querySelector","menu","utilityMenu","megaNavMode","hoverDelay","style","display","hideTimers","Map","getFocusable","container","Array","from","querySelectorAll","closeMegaMenus","forEach","el","remove","timer","key","startsWith","clearTimeout","delete","setTimeout","link","controlId","getAttribute","controlledEl","contains","setAttribute","closeUtilityMenus","closeAll","clear","handleMegaKeyNav","e","megaMenu","currentTarget","preventDefault","_topLink","focus","removeEventListener","focusable","currentIndex","indexOf","activeElement","shiftKey","length","topLinks","index","targetLink","setupDropdowns","menuElement","toggle","addEventListener","stopPropagation","menuItem","parentNode","error","mode","exists","linkHref","href","linkText","textContent","trim","timerId","concat","clearTimer","has","get","showMenu","otherLink","id","hideMenu","set","isActive","firstFocusable","heading","isUtilityMenu","closest","hasDropdownToggle","submenu","firstLink","isExpanded","toString","label","dropdownToggle","cursor","click","target","attempts","maxAttempts","pollForNav","setInterval","clearInterval","message","stack"],"mappings":"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"}